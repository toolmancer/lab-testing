<!doctype html><html lang="en"><head><meta charset='utf-8'><meta name='viewport' content='width=device-width,initial-scale=1'><title>Steganography</title>
<link rel='stylesheet' href='../style.css'><style>body{margin:0;padding:18px;font-family:Inter,Arial;color:#0b1220}.controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;align-items:center}input,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e6eef6}.btn{background:linear-gradient(90deg,#00e0ff,#60f0d5);border:0;padding:10px 14px;border-radius:8px;cursor:pointer;font-weight:700}.preview-img{max-width:100%;border-radius:8px;margin-top:10px}.note{color:#334155;margin-top:8px}</style></head><body>
<div class='container'><h2>Steganography (Demo)</h2><p>Load an image (PNG recommended) and hide a short message. This demo uses simple LSB encode â€” for learning only.</p>
<input id='imgFile' type='file' accept='image/*'><br><textarea id='msg' rows='4' placeholder='Secret message to hide'></textarea>
<div class='controls'><button class='btn' id='encode'>Hide Message</button><button class='btn' id='decode'>Decode Message</button></div>
<p class='note'>Note: This demo is simple and not cryptographically secure. Use PNG for best results.</p>
<canvas id='c' style='display:none'></canvas><img id='preview' class='preview-img' alt='Preview'/></div>
<script>function toUint8(s){return new TextEncoder().encode(s);}function toStr(u){return new TextDecoder().decode(u);}document.getElementById('imgFile').addEventListener('change',function(e){const f=e.target.files[0];if(!f) return;const url=URL.createObjectURL(f);document.getElementById('preview').src=url;});document.getElementById('encode').addEventListener('click',()=>{const imgEl=document.getElementById('preview');if(!imgEl.src) return alert('Load an image first');const msg=document.getElementById('msg').value||'';if(!msg) return alert('Enter message');const canvas=document.getElementById('c');const ctx=canvas.getContext('2d');canvas.width=imgEl.naturalWidth;canvas.height=imgEl.naturalHeight;ctx.drawImage(imgEl,0,0);const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);const payload=toUint8(msg);if(payload.length > Math.floor((imageData.data.length/4) * 3) - 4){return alert('Message too large for this image');}const len=payload.length;const dataBytes=new Uint8Array(4 + payload.length);dataBytes[0]=(len>>>24)&255;dataBytes[1]=(len>>>16)&255;dataBytes[2]=(len>>>8)&255;dataBytes[3]=len&255;dataBytes.set(payload,4);let bitIndex=0;for(let i=0;i<imageData.data.length && bitIndex < dataBytes.length*8;i+=4){for(let c=0;c<3 && bitIndex < dataBytes.length*8;c++){const byteIdx=Math.floor(bitIndex/8);const bitIn=7 - (bitIndex%8);const bit=(dataBytes[byteIdx]>>bitIn)&1;imageData.data[i+c] = (imageData.data[i+c] & 0xFE) | bit;bitIndex++;}}ctx.putImageData(imageData,0,0);const out=canvas.toDataURL('image/png');const a=document.createElement('a');a.href=out;a.download='stego.png';a.click();URL.revokeObjectURL(imgEl.src);alert('Message embedded and PNG downloaded.');});document.getElementById('decode').addEventListener('click',()=>{const imgEl=document.getElementById('preview');if(!imgEl.src) return alert('Load an image first');const canvas=document.getElementById('c');const ctx=canvas.getContext('2d');canvas.width=imgEl.naturalWidth;canvas.height=imgEl.naturalHeight;ctx.drawImage(imgEl,0,0);const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);let bits=[];for(let i=0;i<32;i++){const pixIdx=Math.floor(i/3)*4 + (i%3);bits.push(imageData.data[pixIdx]&1);}let len=0;for(let i=0;i<32;i++){len=(len<<1)|bits[i];}if(len===0){return alert('No message found or zero-length');}const totalBits=(4+len)*8;const payloadBits=[];for(let i=0;i<totalBits;i++){const pixIdx=Math.floor(i/3)*4 + (i%3);payloadBits.push(imageData.data[pixIdx]&1);}const payloadBytes=new Uint8Array(Math.ceil(payloadBits.length/8));for(let i=0;i<payloadBits.length;i++){const bIdx=Math.floor(i/8);payloadBytes[bIdx]= (payloadBytes[bIdx]<<1)|payloadBits[i];}const msgBytes=payloadBytes.slice(4,4+len);alert('Decoded message:\n'+ toStr(msgBytes));URL.revokeObjectURL(imgEl.src);});</script></body></html>